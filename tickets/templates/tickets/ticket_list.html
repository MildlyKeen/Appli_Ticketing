{% extends "appli_ticketing/base.html" %}

{% block title %}Liste des Tickets{% endblock %}

{% block content %}
    <h1>Liste des Tickets</h1>
    <a href="{% url 'tickets:ticket_create' %}">Créer un ticket</a>
    <ul>
        {% for ticket in tickets %}
            <li>
                <a href="{% url 'tickets:ticket_detail' ticket.pk %}">{{ ticket.title }}</a>
                {% if user == ticket.created_by or user.is_superuser %}
                    | <a href="{% url 'tickets:ticket_edit' ticket.pk %}">Éditer</a>
                    | <a href="{% url 'tickets:ticket_delete' ticket.pk %}">Supprimer</a>
                {% endif %}
                {% if user.is_staff or user.is_superuser %}
                    | <a href="{% url 'tickets:ticket_assign' ticket.pk %}">Assigner</a>
                {% endif %}
            </li>
        {% empty %}
            <li>Aucun ticket trouvé.</li>
        {% endfor %}
    </ul>
{% endblock %}